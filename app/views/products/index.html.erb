<div class="container mx-auto px-4 py-8">
  <h1 class="text-3xl font-bold mb-8 text-center">Danh sách sản phẩm</h1>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
    <% @products.each do |product| %>
      <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300">
        <!-- Product Image -->
        <div class="h-48 bg-gray-200 relative">
          <% if product.main_image.present? %>
            <%= image_tag product.main_image.url(:medium), 
                          class: "w-full h-full object-cover",
                          alt: product.name %>
          <% else %>
            <div class="w-full h-full flex items-center justify-center">
              <span class="text-gray-500">Không có ảnh</span>
            </div>
          <% end %>
          
          <!-- Product Badges -->
          <div class="absolute top-2 left-2 space-y-1">
            <% if product.is_new %>
              <span class="bg-green-500 text-white text-xs px-2 py-1 rounded-full">Mới</span>
            <% end %>
            <% if product.is_hot %>
              <span class="bg-red-500 text-white text-xs px-2 py-1 rounded-full">Hot</span>
            <% end %>
            <% if product.is_featured %>
              <span class="bg-blue-500 text-white text-xs px-2 py-1 rounded-full">Nổi bật</span>
            <% end %>
          </div>
        </div>
        
        <!-- Product Info -->
        <div class="p-4">
          <h3 class="font-semibold text-lg mb-2 line-clamp-2"><%= product.name %></h3>
          
          <p class="text-gray-600 text-sm mb-3 line-clamp-2"><%= product.short_description %></p>
          
          <div class="mb-3">
            <span class="text-xl font-bold text-blue-600">
              <%= number_to_currency(product.price, unit: "₫", precision: 0) %>
            </span>
            <% if product.original_price && product.original_price > product.price %>
              <span class="text-sm text-gray-500 line-through ml-2">
                <%= number_to_currency(product.original_price, unit: "₫", precision: 0) %>
              </span>
            <% end %>
          </div>
          
          <div class="flex justify-between items-center text-sm text-gray-600 mb-3">
            <span><%= product.brand&.name %></span>
            <span>
              <% if product.stock_quantity > 0 %>
                <span class="text-green-600">Còn hàng</span>
              <% else %>
                <span class="text-red-600">Hết hàng</span>
              <% end %>
            </span>
          </div>
          
          <%= link_to "Xem chi tiết", product_path(product.slug), 
                      class: "block w-full text-center bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition-colors duration-200" %>
        </div>
      </div>
    <% end %>
  </div>
  
  <% if @products.empty? %>
    <div class="text-center py-16">
      <div class="text-gray-500 text-xl mb-4">Không có sản phẩm nào</div>
      <p class="text-gray-400">Vui lòng quay lại sau hoặc liên hệ với chúng tôi.</p>
    </div>
  <% end %>
</div>

<style>
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
</style>
